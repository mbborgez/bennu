<div>
    <ul class="nav nav-pills">
        <li class="active"><a href="" data-target="#metrics" data-toggle="tab">Metrics</a></li>
        <li><a href="" data-target="#projects" data-toggle="tab">Fenix Framework Projects</a></li>
        <li><a href="" data-target="#libraries" data-toggle="tab">Libraries</a></li>
        <li><a href="" data-target="#system" data-toggle="tab">System Properties</a></li>
        <li><a href="" data-target="#environment" data-toggle="tab">Environment Properties</a></li>
        <li><a href="" data-target="#http" data-toggle="tab">HTTP Headers</a></li>
        <li><a href="" data-target="#conf" data-toggle="tab">Static Configurations</a></li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane" id="projects">
            <table class="table table-striped table-bordered">
                <tr>
                    <th>GroupId</th>
                    <th>ArtifactId</th>
                    <th>Name</th>
                    <th>Version</th>
                    <th>Creation Date</th>
                    <th>Jdk Version</th>
                    <th>Built By</th>
                </tr>
                <tr ng-repeat="project in data.projects">
                    <td>{{project.groupId}}</td>
                    <td>{{project.artifactId}}</td>
                    <td>{{project['Implementation-Title']}}</td>
                    <td>{{project.version}}</td>
                    <td>{{project.creation}}</td>
                    <td>{{project['Build-Jdk']}}</td>
                    <td>{{project['Built-By']}}</td>
                </tr>
            </table>
        </div>
        <div class="tab-pane" id="libraries">
            <table class="table table-striped table-bordered">
                <tr>
                    <th>GroupId</th>
                    <th>ArtifactId</th>
                    <th>Name</th>
                    <th>Version</th>
                    <th>Creation Date</th>
                    <th>Jdk Version</th>
                    <th>Built By</th>
                </tr>
                <tr ng-repeat="library in data.libraries">
                    <td>{{library.groupId}}</td>
                    <td>{{library.artifactId}}</td>
                    <td>{{library['Implementation-Title']}}</td>
                    <td>{{library.version}}</td>
                    <td>{{library.creation}}</td>
                    <td>{{library['Build-Jdk']}}</td>
                    <td>{{library['Built-By']}}</td>
                </tr>
            </table>
        </div>
        <div class="tab-pane" id="system">
            <table class="table table-striped table-bordered">
                <tr>
                    <th>Property</th>
                    <th>Value</th>
                </tr>
                <tr ng-repeat="property in data.sys">
                    <td>{{property.key}}</td>
                    <td>{{property.value}}</td>
                </tr>
            </table>
        </div>
        <div class="tab-pane" id="environment">
            <table class="table table-striped table-bordered">
                <tr>
                    <th>Property</th>
                    <th>Value</th>
                </tr>
                <tr ng-repeat="prop in data.env">
                    <td>{{prop.key}}</td>
                    <td>{{prop.value}}</td>
                </tr>
            </table>
        </div>
        <div class="tab-pane" id="http">
            <table class="table table-striped table-bordered">
                <tr>
                    <th>Property</th>
                    <th>Value</th>
                </tr>
                <tr ng-repeat="property in data.http">
                    <td>{{property.key}}</td>
                    <td>{{property.value}}</td>
                </tr>
            </table>
        </div>
        <div class="tab-pane" id="conf">
            <table class="table table-striped table-bordered">
                <tr>
                    <th>Property</th>
                    <th>Value</th>
                </tr>
                <tr ng-repeat="property in data.conf">
                    <td>{{property.key}}</td>
                    <td>{{property.value}}</td>
                </tr>
            </table>
        </div>
        <div class="tab-pane active" id="metrics">
            <div class="col-lg-12">
                <br />
                <button class="btn btn-success" ng-click="reload()">Reload</button>
                <button class="btn btn-primary" ng-click="threadDump()">Thread Dump</button>
            </div>
            <div class="row">
            <div class="col-lg-4">
                <h4>Memory</h4>
                <p>Total Memory ({{data.metrics['jvm.memory.total.used'] / 1000000 | number:0}}M / {{data.metrics['jvm.memory.total.max'] / 1000000 | number:0}}M)</p>
                <div class="progress progress-striped">
                    <div class="progress-bar progress-bar-success" role="progressbar"
                         aria-valuenow="{{data.metrics['jvm.memory.total.used'] / 1000000 | number:0}}"
                         aria-valuemin="0"
                         aria-valuemax="{{data.metrics['jvm.memory.total.max'] / 1000000 | number:0}}"
                         style="width: {{data.metrics['jvm.memory.total.used'] * 100 / data.metrics['jvm.memory.total.max']  | number:0}}%">
                        {{data.metrics['jvm.memory.total.used'] * 100 / data.metrics['jvm.memory.total.max']  | number:0}}%
                    </div>
                </div>
                <p>Heap Memory ({{data.metrics['jvm.memory.heap.used'] / 1000000 | number:0}}M / {{data.metrics['jvm.memory.heap.max'] / 1000000 | number:0}}M)</p>
                <div class="progress progress-striped">
                    <div class="progress-bar progress-bar-success" role="progressbar"
                         aria-valuenow="{{data.metrics['jvm.memory.heap.used'] / 1000000 | number:0}}"
                         aria-valuemin="0"
                         aria-valuemax="{{data.metrics['jvm.memory.heap.max'] / 1000000 | number:0}}"
                         style="width: {{data.metrics['jvm.memory.heap.used'] * 100 / data.metrics['jvm.memory.heap.max']  | number:0}}%">
                        {{data.metrics['jvm.memory.heap.used'] * 100 / data.metrics['jvm.memory.heap.max']  | number:0}}%
                    </div>
                </div>
                <p>Non-heap Memory ({{data.metrics['jvm.memory.non-heap.used'] / 1000000 | number:0}}M / {{data.metrics['jvm.memory.non-heap.max'] / 1000000 | number:0}}M)</p>
                <div class="progress progress-striped">
                    <div class="progress-bar progress-bar-success" role="progressbar"
                         aria-valuenow="{{data.metrics['jvm.memory.non-heap.used'] / 1000000 | number:0}}"
                         aria-valuemin="0"
                         aria-valuemax="{{data.metrics['jvm.memory.non-heap.max'] / 1000000 | number:0}}"
                         style="width: {{data.metrics['jvm.memory.non-heap.used'] * 100 / data.metrics['jvm.memory.non-heap.max']  | number:0}}%">
                        {{data.metrics['jvm.memory.non-heap.used'] * 100 / data.metrics['jvm.memory.non-heap.max']  | number:0}}%
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <h4>JVM</h4>
                <p><strong>Thread Count:</strong> {{data.metrics['jvm.threads.count']}}</p>
                <p><strong>Total Loaded Classes:</strong> {{data.metrics['jvm.classloading.loaded.total']}}</p>
                <p><strong>Loaded Classes:</strong> {{data.metrics['jvm.classloading.loaded']}}</p>
                <p><strong>Unloaded Classes:</strong> {{data.metrics['jvm.classloading.unloaded']}}</p>

            </div>
            <div class="col-lg-4">
                <h4>Fenix Framework</h4>
                <p><strong>Objects in cache:</strong> {{data.metrics.cacheSize}}</p>
                <p><strong>Project Name:</strong> {{data.metrics.project}}</p>
                <p><strong>Project Version:</strong> {{data.metrics.version}}</p>
            </div>
            </div>

            <div class="container" ng-if="threads">
                <h3>Threads</h3>
                <div class="col-lg-2">
                    <a href="" class="label label-primary" ng-click="threadDumpFilter = {}">All&nbsp;<span class="badge">{{threads.totalThreads}}</span></a><br />
                    <a href="" class="label label-success" ng-click="threadDumpFilter = {state: 'RUNNABLE'}">Runnable&nbsp;<span class="badge">{{threads.RUNNABLE}}</span></a><br />
                    <a href="" class="label label-info" ng-click="threadDumpFilter = {state: 'WAITING'}">Waiting&nbsp;<span class="badge">{{threads.WAITING}}</span></a><br />
                    <a href="" class="label label-warning" ng-click="threadDumpFilter = {state: 'TIMED_WAITING'}">Timed Waiting&nbsp;<span class="badge">{{threads.TIMED_WAITING}}</span></a><br />
                    <a href="" class="label label-danger" ng-click="threadDumpFilter = {state: 'BLOCKED'}">Blocked&nbsp;<span class="badge">{{threads.BLOCKED}}</span></a>
                </div>

                <div class="col-lg-10">
                    <div class="row" ng-repeat="thread in threads.threads | filter:threadDumpFilter:true ">
                        <h5><span class="label" ng-class="getLabelClass(thread.state)">&nbsp;</span>&nbsp;<a href="" ng-click="thread.shown = !thread.shown">{{thread.name}} ({{thread.id}})</a></h5>
                        <pre ng-show="thread.shown" style="overflow-y: scroll">{{thread.stacktrace}}</pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
