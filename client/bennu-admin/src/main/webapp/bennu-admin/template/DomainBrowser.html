<style>
kbd { color: #666; border-radius: 0; box-shadow: none; background-color: initial; padding: 0; }

.loading { position: absolute; left: 10px; bottom: 10px;}
</style>

<h2>Domain Browser</h2>

<div class="row">
	<div class="col-lg-9">
		<h3>{{data.type}} <span class="label label-primary">{{data.oid}}</span>
		<span class="label" ng-class="{'label-success': mod == 'PUBLIC', 'label-warning': mod == 'PROTECTED'}" ng-repeat="mod in data.modifiers">
			{{mod | capitalize}}
		</span>
		</h3>
	</div>
	<div class="col-lg-3" style="margin-top: 20px">
		<button class="btn btn-success btn-sm pull-right" ng-click="reload()">Load</button>
		<input type="text" class="pull-right" ng-model="oid">
	</div>

</div>

<table class="table">
	<thead>
		<th>Name</th>
		<th>Value</th>
		<th>Type</th>
		<th>Modifiers</th>
	</thead>
	<tbody>
		<tr ng-repeat="slot in data.slots | orderBy:'name'">
			<td>{{slot.name}}</td>
			<td>
				<kbd ng-if="!slot.value" style="color: #999">null</kbd>
				{{slot.value}}
			</td>
			<td><kbd>{{slot.type}}</kbd></td>
			<td>
				<span class="label" ng-class="{'label-success': mod == 'PUBLIC', 'label-warning': mod == 'PROTECTED'}" ng-repeat="mod in slot.modifiers">
					{{mod}}
				</span>
			</td>
		</tr>
		<tr ng-repeat="slot in data.relationSlots | orderBy:'name'">
			<td>{{slot.name}}</td>
			<td>
				<kbd ng-if="!slot.value" style="color: #999">null</kbd>
				<a href="#/domain-browser/{{slot.value}}" ng-if="slot.value" ng-click="goTo(slot.value)">
					{{slot.value}}
				</a>
			</td>
			<td><kbd>{{slot.type}}</kbd></td>
			<td>
				<span class="label" ng-class="{'label-success': mod == 'PUBLIC', 'label-warning': mod == 'PROTECTED'}" ng-repeat="mod in slot.modifiers">
					{{mod}}
				</span>
			</td>
		</tr>
	</tbody>
</table>

<div class="row" ng-if="data.relationSets">
	<div class="col-lg-6">
		<table class="table">
			<thead>
				<th>Name</th>
				<th>Type</th>
				<th>Modifiers</th>
			</thead>
			<tbody>
				<tr ng-repeat="role in data.relationSets | orderBy:'name'">
					<td><a href="" data-toggle="modal" data-target="#relations" ng-click="exploreRelation(role.name)">{{role.name}}</a></td>
					<td>{{role.type}}</td>
					<td>
						<span class="label" ng-class="{'label-success': mod == 'PUBLIC', 'label-warning': mod == 'PROTECTED'}" ng-repeat="mod in role.modifiers">
							{{mod}}
						</span>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>

<div class="modal fade" id="relations">
	<div class="modal-dialog" style="width: 900px">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h2 class="modal-title">{{data.oid}}'s {{relation}}</h2>
			</div>
			<div class="modal-body">
				<div ng-if="!relations">
					Loading...
				</div>
				<table class="table" ng-if="relations != null">
					<span ng-if="relations != null" class="pull-right">{{totalEntries}} entries</span>
					<thead>
						<th>Object</th>
						<th>Type</th>
					</thead>
					<tr ng-repeat="obj in relations[currentPage]">
						<td><a href="#/domain-browser/{{obj.oid}}" ng-click="goTo(obj.oid)" data-dismiss="modal">{{obj.oid}}</a></td>
						<td>{{obj.type}}</td>
					</tr>
				</table>
				<div class="center" ng-if="relations.length > 1">
					<ul class="pagination">
						<li ng-click="previousPage()" ng-class="{disabled: currentPage <= 0}">
							<a href >«</a>
						</li>
						<li class="disabled">
							<a href>{{currentPage + 1}} / {{relations.length}}</a>
						</li>
						<li ng-click="nextPage()" ng-class="{disabled: currentPage >= relations.length - 1}">
							<a href >»</a>
						</li>
					</ul>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>